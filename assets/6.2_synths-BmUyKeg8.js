import{p as W}from"./p5.min-BSfcF2sv.js";import{S as s,T as S}from"./index-BGeJOtze.js";import{i as b}from"./index.es-BqIYh0BY.js";import{L as z}from"./Loop-BIzYltV2.js";import{W as A}from"./Waveform-CRdB1mpg.js";import"./MeterBase-XOrtjUOA.js";const R=e=>{let h=-10,l=!1,m,i,w,f,u;e.setup=()=>{e.createCanvas(e.windowWidth,e.windowHeight),f=b.get("C4 major").notes},e.windowResized=()=>{e.resizeCanvas(e.windowWidth,e.windowHeight)},e.draw=()=>{e.background(0),l?v(m):(e.fill(255),e.noStroke(),e.textAlign(e.CENTER),e.text("Click to start sound",e.width/2,e.height/2))},e.mousePressed=()=>{l||(l=!0,g())};function g(){i=new s,i.toDestination(),i.volume.value=h,w=new z(c,"8n"),w.start(),m=new A,i.connect(m),S.start()}function c(p){let a=e.noise(e.frameCount*.1),r=e.floor(e.map(a,0,1,0,f.length)),o=f[r];u!=o&&i.triggerAttackRelease(o,"8n",p),u=o}function v(p,a=e.width,r=e.height){e.stroke(255);let o=p.getValue(0),n=0;for(let t=1;t<o.length;t++)if(o[t-1]<0&&o[t]>=0){n=t;break}let d=n+o.length/2;for(let t=n;t<d;t++){let k=e.map(t-1,n,d,0,a),C=e.map(o[t-1],-1,1,0,r),x=e.map(t,n,d,0,a),y=e.map(o[t],-1,1,0,r);e.line(k,C,x,y)}}};new W(R);
