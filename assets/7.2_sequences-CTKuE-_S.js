import{p as k}from"./p5.min-BSfcF2sv.js";import{T as v,S as C}from"./index-BGeJOtze.js";import{i as N,b as d}from"./index.es-BqIYh0BY.js";import{P as T}from"./Pattern-AvYLfnE9.js";import"./Loop-BIzYltV2.js";const x=t=>{let m=-10,r=!1,p,o=[0,2,4,6],u;t.setup=()=>{t.createCanvas(t.windowWidth,t.windowHeight),p=N.get("C4 major").notes},t.windowResized=()=>{t.resizeCanvas(t.windowWidth,t.windowHeight)},t.draw=()=>{t.background(0),r?(t.fill(255),t.noStroke(),t.textAlign(t.CENTER,t.CENTER),t.textSize(100),t.text(u.currentNote,t.width/2,t.height/2)):(t.fill(255),t.noStroke(),t.textAlign(t.CENTER),t.text("Click to start sound",t.width/2,t.height/2))},t.mousePressed=()=>{r||(r=!0,f())},t.keyPressed=()=>{o=o.reverse()};function w(n,e){let i=e.length,a=g(n,i),s=e[a],h=d.octave(e[0])+t.floor(n/i);return d.pitchClass(s)+h}function f(){u=new y({transpose:-7,tempo:"2n"}),v.start()}function g(n,e){return(n%e+e)%e}class y{constructor({transpose:e=0,noteDuration:i="8n",tempo:a="4n",patternType:s="up"}){this.noteDuration=i,this.tempo=a,this.patternType=s,this.transpose=e,this.synth=new C,this.synth.toDestination(),this.synth.volume.value=m,this.pattern=new T((c,h)=>{let l=w(o[h]+this.transpose,p);this.synth.triggerAttackRelease(l,this.noteDuration,c),this.currentNote=l},Array.from(o.keys()),this.patternType),this.pattern.interval=this.tempo,this.pattern.start()}}};new k(x);
