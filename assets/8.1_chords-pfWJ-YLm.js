import{p as x}from"./p5.min-BSfcF2sv.js";import{D as k,T as m}from"./index-BGeJOtze.js";import{i as A,b as v}from"./index.es-BqIYh0BY.js";import{P as F,A as N,F as z}from"./FFT-F1tRpMxB.js";import"./MeterBase-XOrtjUOA.js";const O=e=>{let C=-10,l=!1,r=A.get("C4 major").notes,i=[],g=0,p=0,d,h;e.setup=()=>{e.createCanvas(e.windowWidth,e.windowHeight);for(let o=0;o<r.length;o++){let t=[];t[0]=a(o,r),t[1]=a(o+2,r),t[2]=a(o+4,r),t[3]=a(o+6,r),i.push(t)}},e.windowResized=()=>{e.resizeCanvas(e.windowWidth,e.windowHeight)},e.draw=()=>{if(e.background(0),l){e.background(0),e.stroke(255);let o=e.min(e.width,e.height)/2;e.translate(e.width/2,e.height/2);let t=h.getValue(0);for(let n=0;n<t.length;n++){e.push();let u=e.map(n,0,t.length,0,e.TWO_PI);e.rotate(u);let c=t[n],w=e.map(c,-100,0,0,o);e.point(0,w),e.pop()}}else e.background(0,25),e.fill(255),e.noStroke(),e.textAlign(e.CENTER),e.text("Click to start sound",e.width/2,e.height/2)},e.mousePressed=()=>{l||(l=!0,b())};function b(){k.volume.value=C,d=new F(N,{envelope:{attack:1,release:2}}),d.toDestination(),h=new z(1024),k.connect(h),m.schedule(f,"1"),m.start()}function f(o){g=p;let t=e.floor(e.random(1,4))+"m";d.triggerAttackRelease(i[g],t,o),p=e.floor(e.random(i.length)),m.schedule(f,"+"+t)}function a(o,t){let n=t.length,u=y(o,n),c=t[u],T=v.octave(t[0])+e.floor(o/n);return v.pitchClass(c)+T}function y(o,t){return(o%t+t)%t}};new x(O);
