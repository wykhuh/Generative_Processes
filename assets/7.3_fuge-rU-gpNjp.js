import{p as N}from"./p5.min-BSfcF2sv.js";import{T as v,S as x}from"./index-BGeJOtze.js";import{i as T,b as h}from"./index.es-BqIYh0BY.js";import{P}from"./Pattern-AvYLfnE9.js";import"./Loop-BIzYltV2.js";const S=t=>{let g=-10,u=!1,c,p=[0,2,4,6],s,f,w;t.setup=()=>{t.createCanvas(t.windowWidth,t.windowHeight),c=T.get("C4 major").notes},t.windowResized=()=>{t.resizeCanvas(t.windowWidth,t.windowHeight)},t.draw=()=>{if(u){t.background(0,25);let i=t.height/20;t.fill(255),t.noStroke(),t.textAlign(t.CENTER,t.CENTER),t.textSize(i),t.translate(t.width/2,t.height/2);for(let e=0;e<c.length;e++){let a=t.map(e,0,c.length,-t.PI/2,t.TWO_PI-t.PI/2),l=t.height/3,n=t.cos(a)*l,r=t.sin(a)*l,o=h.pitchClass(c[e]);o==h.pitchClass(w.currentNote)&&(t.stroke(0,128,255),t.line(n,r,0,0),t.fill(0),t.circle(n,r,i*3)),o==h.pitchClass(f.currentNote)&&(t.stroke(128,255,0),t.line(n,r,0,0),t.fill(0),t.circle(n,r,i*2.5)),o==h.pitchClass(s.currentNote)&&(t.stroke(255),t.line(n,r,0,0),t.fill(0),t.circle(n,r,i*2)),t.noStroke(),t.fill(255),t.text(o,n,r)}t.text(s.currentNote,0,0)}else t.background(0),t.fill(255),t.noStroke(),t.textAlign(t.CENTER),t.text("Click to start sound",t.width/2,t.height/2)},t.mousePressed=()=>{u||(u=!0,y())},t.keyPressed=()=>{p=p.reverse()};function k(i,e){let a=e.length,l=C(i,a),n=e[l],o=h.octave(e[0])+t.floor(i/a);return h.pitchClass(n)+o}function y(){s=new m({}),f=new m({transpose:4,noteDuration:"8n",tempo:"8n."}),w=new m({transpose:-7,noteDuration:"1n",tempo:"1n"}),v.start()}function C(i,e){return(i%e+e)%e}class m{constructor({transpose:e=0,noteDuration:a="8n",tempo:l="8n",patternType:n="up"}){this.noteDuration=a,this.tempo=l,this.patternType=n,this.transpose=e,this.synth=new x,this.synth.toDestination(),this.synth.volume.value=g,this.pattern=new P((r,o)=>{let d=k(p[o]+this.transpose,c);this.synth.triggerAttackRelease(d,this.noteDuration,r),this.currentNote=d},Array.from(p.keys()),this.patternType),this.pattern.interval=this.tempo,this.pattern.start()}}};new N(S);
