import{p as t,G as e,i as n,a as o,T as a,S as s,P as i,d as r,c as l}from"./vendor.abe8152f.js";import{r as h}from"./sketch_utils.7ead99bc.js";new t((t=>{let p,c,u,d,m,f=!1,g=[0,2,4,6],w=g,k={mixup:C,rotateLeft:T,rotateRight:x,invert:y,mutate:R,tempo:120,reset:function(){h(m),w=g}};t.setup=()=>{t.createCanvas(t.windowWidth,t.windowHeight),m=new e,m.add(k,"mixup").name("Shuffle"),m.add(k,"rotateLeft").name("Rotate left"),m.add(k,"rotateRight").name("Rotate right"),m.add(k,"invert").name("Invert"),m.add(k,"mutate").name("Mutate"),m.add(k,"tempo",30,240,1).name("Tempo").onChange(N),m.add(k,"reset").name("Reset"),m.width=200,m.close(),p=n.get("C4 major").notes},t.windowResized=()=>{t.resizeCanvas(t.windowWidth,t.windowHeight)},t.draw=()=>{if(f){t.background(0,25),t.fill(255),t.noStroke(),t.textAlign(t.LEFT,t.BOTTOM),t.textSize(25),t.push();for(let n of w)t.text(n,20,30),t.translate(25,0);t.pop();let e=t.height/20;t.fill(255),t.noStroke(),t.textAlign(t.CENTER,t.CENTER),t.textSize(e),t.translate(t.width/2,t.height/2);for(let n=0;n<p.length;n++){let o=t.map(n,0,p.length,-t.PI/2,t.TWO_PI-t.PI/2),a=t.height/3,s=t.cos(o)*a,i=t.sin(o)*a,l=r.pitchClass(p[n]);l==r.pitchClass(d.currentNote)&&(t.stroke(0,128,255),t.line(s,i,0,0),t.fill(0),t.circle(s,i,3*e)),l==r.pitchClass(u.currentNote)&&(t.stroke(128,255,0),t.line(s,i,0,0),t.fill(0),t.circle(s,i,2.5*e)),l==r.pitchClass(c.currentNote)&&(t.stroke(255),t.line(s,i,0,0),t.fill(0),t.circle(s,i,2*e)),t.noStroke(),t.fill(255),t.text(l,s,i)}t.text(c.currentNote,0,0)}else t.background(0),t.fill(255),t.noStroke(),t.textAlign(t.CENTER),t.text("Click to start sound",t.width/2,t.height/2)},t.mousePressed=()=>{f||(f=!0,c=new v({}),u=new v({transpose:4,noteDuration:"8n",tempo:"8n."}),d=new v({transpose:-7,noteDuration:"1n",tempo:"1n"}),new o((e=>{let n=[y,R,T,x,C];t.random(n)()}),"2m").start("+2m"),a.start())},t.keyPressed=()=>{w=w.reverse()};class v{constructor({transpose:e=0,noteDuration:n="8n",tempo:o="8n",patternType:a="up"}){this.noteDuration=n,this.tempo=o,this.patternType=a,this.transpose=e,this.synth=new s,this.synth.toDestination(),this.synth.volume.value=-10,this.pattern=new i(((e,n)=>{let o=function(e,n){let o=n.length;var a;let s=n[(e%(a=o)+a)%a],i=r.octave(n[0])+t.floor(e/o);return r.pitchClass(s)+i}(w[n]+this.transpose,p);this.synth.triggerAttackRelease(o,this.noteDuration,e),this.currentNote=o}),Array.from(w.keys()),this.patternType),this.pattern.interval=this.tempo,this.pattern.start()}}function C(){t.shuffle(w,!0)}function T(){w=l.rotate(1,w)}function x(){w=l.rotate(-1,w)}function y(){w=w.map((t=>p.length-t))}function R(){let e=t.floor(t.random(w.length));t.random(1)<.5?w[e]++:w[e]--}function N(t){a.bpm.value=t}}));
