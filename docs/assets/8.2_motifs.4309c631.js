import{p as t,i as e,D as n,T as o,e as s,A as i,f as a,S as l,F as h,d as r,a as c}from"./vendor.abe8152f.js";new t((t=>{let d,u,g=!1,f=e.get("C4 major").notes,w=[],m=0,p=0;function v(e){m=p;let n=t.floor(t.random(1,4))+"m";d.triggerAttackRelease(w[m],n,e),p=t.floor(t.random(w.length)),o.schedule(v,"+"+n)}function x(e,n){let o=n.length;var s;let i=n[(e%(s=o)+s)%s],a=r.octave(n[0])+t.floor(e/o);return r.pitchClass(i)+a}t.setup=()=>{t.createCanvas(t.windowWidth,t.windowHeight);for(let t=0;t<f.length;t++){let e=[];e[0]=x(t,f),e[1]=x(t+2,f),e[2]=x(t+4,f),e[3]=x(t+6,f),w.push(e)}},t.windowResized=()=>{t.resizeCanvas(t.windowWidth,t.windowHeight)},t.draw=()=>{if(t.background(0),g){t.background(0),t.stroke(255);let e=t.min(t.width,t.height)/2;t.translate(t.width/2,t.height/2);let n=u.getValue(0);for(let o=0;o<n.length;o++){t.push();let s=t.map(o,0,n.length,0,t.TWO_PI);t.rotate(s);let i=n[o],a=t.map(i,-100,0,0,e);t.point(0,a),t.pop()}}else t.background(0,25),t.fill(255),t.noStroke(),t.textAlign(t.CENTER),t.text("Click to start sound",t.width/2,t.height/2)},t.mousePressed=()=>{g||(g=!0,function(){n.volume.value=-10,o.bpm.value=60,d=new s(i,{envelope:{attack:1,release:2},volume:-6}),d.toDestination();let t=new k([0,1,2,3,4,3,2],"xx-x--"),e=new k([4,3,2,1,0],"-x-xx-x","8n","16n",7),r=new a("8n.",.5);t.synth.connect(r),e.synth.connect(r),r.toDestination();let c=new l;c.oscillator.type="fattriangle",c.toDestination(),c.triggerAttack(x(-14,f)),u=new h(1024),n.connect(u),o.schedule(v,"1"),o.start()}())};class k{constructor(t,e,n="8n",o="8n",s=0){this.tempo=n,this.duration=o,this.offset=s,this.synth=new i,this.motif=y(t),this.rhythm=y(e),this.loop=new c((t=>{let e=w[m],n=this.motif.next().value;if("x"==this.rhythm.next().value){let o=x(n+this.offset,e);this.synth.triggerAttackRelease(o,this.duration,t)}}),this.tempo),this.loop.start(1)}}function*y(t){let e=0;for(;;){let n=t[e%t.length];e++,yield n}}}));
